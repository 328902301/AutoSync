const mainConfig={},modifyStatusesUrls=["statuses/friends/timeline","statuses/friends_timeline","statuses/unread_friends_timeline","statuses/unread_hot_timeline"],modifyOtherUrls={"ct=feed&a=trends":"removeTopics",user_center:"modifiedUserCenter","interface/sdk/sdkad.php":"removePhpScreenAds","a=get_coopen_ads":"removeIntlOpenAds"};function getModifyMethod(e){for(const d of modifyStatusesUrls)if(-1<e.indexOf(d))return"removeTimeLine";for(var[t,a]of Object.entries(modifyOtherUrls))if(-1<e.indexOf(t))return a;return null}function removeTopics(e){return e.data&&0!==e.data.length&&e.data.order&&(e.data.order=["search_topic"]),e}function modifiedUserCenter(e){return e.data&&0!==e.data.length&&(e.data.cards=Object.values(e.data.cards).filter(e=>!("personal_vip"===e.items[0].type))),e}function removePhpScreenAds(e){return e.ads&&0!==e.ads.length&&(e.show_push_splash_ad=!1,e.background_delay_display_time=604800,e.ads=[]),e}function removeIntlOpenAds(e){return e.data&&0!==e.data.length&&(e.data.ad_list=[],e.data.gdt_video_ad_ios=[],e.data.display_ad=0,e.data.ad_ios_id=null,e.data.app_ad_ios_id=null,e.data.reserve_ad_ios_id="",e.data.reserve_app_ad_ios_id="",e.data.ad_duration=604800,e.data.ad_cd_interval=604800,e.data.pic_ad=[]),e}function isAd(e){return!(!e||"广告"!==e.mblogtypename&&"热推"!==e.mblogtypename&&"廣告"!==e.mblogtypename&&"熱推"!==e.mblogtypename&&(!e.promotion||"ad"!==e.promotion.type))}function isBlock(e){var t=mainConfig.blockIds||[];if(0!==t.length){var a=e.user.id;for(const d of t)if(d==a)return!0}return!1}function removeTimeLine(e){for(const a of["ad","advertises","trends"])e[a]&&(e[a]=void 0);if(e.statuses){var t=[];for(const d of e.statuses)isAd(d)||isBlock(d)||t.push(d);e.statuses=t}}var body=$response.body,url=$request.url;let method=getModifyMethod(url);if(method){var func=eval(method);if("removePhpScreenAds"===method){let data=JSON.parse(body.substring(0,body.length-2));new func(data),body=JSON.stringify(data)+"OK"}else{let data=JSON.parse(body);new func(data),body=JSON.stringify(data)}}$done({body:body});