let body=$response.body;if(body){var obj=JSON.parse(body);let e=getType(obj),t=$prefs.valueForKey("bili_user_equip"),o=$prefs.valueForKey("bili_load_equip"),i=$prefs.valueForKey("bili_skin_num"),s=$prefs.valueForKey("bili_load_num");setEquip(t,i,e,"user_equip"),setEquip(o,s,e,"load_equip"),$done({body:JSON.stringify(obj)})}else $done();function setEquip(e,t,o,i){e&&(e=JSON.parse(e),0!==(t=getNum(t.trim(),o)))&&(1===e.length?obj.data[i]=e[0]:t<=e.length?obj.data[i]=e[t-1]:($notify("B站装扮DIY","","参数设置过大，请检查BoxJs设置"),obj.data[i]=e[0]))}function getNum(e,t){return e?0<=parseInt(e)?parseInt(e):/([;；]\d+(:\d+)?){2}/.test(e)?parseInt(e.split(/;|；/)[t+1].split(":")[0]):($notify("B站装扮DIY","","参数格式非法，请检查BoxJs设置"),1):1}function getType(e){return e.data.skin_colors?0:1}