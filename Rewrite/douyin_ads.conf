# By Choler

# 去除抖音广告&水印
# ^https?:\/\/aweme\.snssdk\.com\/aweme\/v[12]\/((|follow\/|nearby\/)feed|aweme\/post|hot\/search\/video\/list|mix\/aweme|aweme\/detail)\/\? url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/aweme\.snssdk\.com\/aweme\/v1\/(aweme\/post|feed|follow\/feed|nearby\/feed|search\/item|general\/search\/single|hot\/search\/video\/list)\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/post\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/feed\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/aweme\/post\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/follow\/feed\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/nearby\/feed\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/search\/item\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/general\/search\/single\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js
# ^https?:\/\/[\w-]+\.amemv\.com\/aweme\/v\d\/hot/search\/video\/list\/ url script-response-body https://github.com/RuCu6/QuanX/raw/main/Scripts/douyin.js

[Rule]
URL-REGEX,^https?:\/\/(api.*\.amemv|aweme\.snssdk)\.com\/api\/ad\/,REJECT

[URL Rewrite]
^https?:\/\/api.*\.amemv\.com\/aweme\/v\d\/ https://aweme.snssdk.com/aweme/v1/ header

[Script]
douyin = type=http-response,pattern=^https?:\/\/aweme\.snssdk\.com\/aweme\/v[12]\/((|follow\/|nearby\/)feed|aweme\/post|hot\/search\/video\/list|mix\/aweme|aweme\/detail)\/\?,requires-body=1,script-path=https://Choler.github.io/Surge/Script/douyin.js

[MITM]
hostname = %APPEND% api*.amemv.com, aweme.snssdk.com
