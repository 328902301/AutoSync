trigger:
    - docker-devops
resources:
    -
        repo: self
        clean: true
pool:
    vmImage: 'Hosted Ubuntu 1604'
steps:
    -
        task: DockerCompose@0
        displayName: build
        inputs:
            containerregistrytype: 'Container Registry'
            dockerRegistryEndpoint: 'Docker Hub - collinbarrett'
            dockerComposeFile: docker-compose.yml
            dockerComposeCommand: build
    -
        task: DockerCompose@0
        displayName: push
        inputs:
            containerregistrytype: 'Container Registry'
            dockerRegistryEndpoint: 'Docker Hub - collinbarrett'
            dockerComposeFile: docker-compose.yml
            dockerComposeCommand: 'push --ignore-push-failures'
    -
        task: PublishBuildArtifacts@1
        displayName: publish
