#
# Rewrite 功能解锁 网页访问
# 21.7.5
# 


# ====================分割线====================


hostname = *.baidu.com,  upos-hz-mirrorakam.akamaized.net, www.bilibili.com,space.bilibili.com,search.bilibili.com,m.bilibili.com, app.bilibili.com,grpc.biliapi.net,  license.pdfexpert.com,  api.m.jd.com,  *.kuwo.cn,*.lrts.me,  spclient.wg.spotify.com,  www.youtube.com, youtubei.googleapis.com, -redirector*.googlevideo.com,*.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com,  *.zhihu.com,*.zhimg.com, www.zhihu.com,zhuanlan.zhihu.com,  apigate.zymk.cn,


# ====================分割线====================


# baidu @elecV2 https://github.com/elecV2/QuantumultX-Tools/blob/master/betterweb/baidu.user.js
^https?:\/\/.*\.baidu\.com url script-response-body https://raw.githubusercontent.com/elecV2/QuantumultX-Tools/master/betterweb/baidu.user.js
^https?:\/\/.*\.baidu\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Mobile/15E148 Safari/16C50 Quark/604.1 T7/10.3 SearchCraft/2.6.3 (Baidu; P1 8.0.0)$2


# 哔哩哔哩
# Upos服务器替换为腾讯Cos对象存储 @? https://github.com/ALyCE233/Bili-UPOS-Roaming/blob/main/UPOS-Redirect.conf
^https?:\/\/upos-hz-mirrorakam\.akamaized\.net\/(.*) url 307 https://upos-sz-mirrorcos.bilivideo.com/$1
# 网页PC @fan
^https?:\/\/(www|space|search|m)\.bilibili\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Safari/605.1.15$2
^https?:\/\/(www|search)\.bilibili\.com url response-body isPC = false response-body isPC = true
^https?:\/\/space\.bilibili\.com url response-body if\(mid.+break\}\} response-body window._bili_space_mid=mid,window._bili_space_mymid=null===DedeUserID?0:+DedeUserID;
# ad app中 
# @blackmatrix7 https://github.com/blackmatrix7/ios_rule_script/blob/master/script/bilibili/bilibili_plus.qxrewrite
# # 去除动态中的话题
# ^https?:\/\/api\.vc\.bilibili\.com\/topic_svr\/v1\/topic_svr url reject-dict
# # 去除动态中的最常访问
# ^https?:\/\/api\.vc\.bilibili\.com\/dynamic_svr\/v1\/dynamic_svr\/mix_uplist url reject-dict
# # 可能的一些推广(beta)
# ^https?:\/\/api\.bilibili\.com\/pgc\/season\/app\/related\/recommend\? url reject-dict
# # 推荐去广告
# ^https?:\/\/app\.bilibili\.com\/x\/v2\/feed\/index url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 追番去广告
# ^https?:\/\/api\.bilibili\.com\/pgc\/page\/bangumi url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 直播去广告
# ^https?:\/\/api\.live\.bilibili\.com\/xlive\/app-room\/v1\/index\/getInfoByRoom url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 动态去广告
# ^https?:\/\/api\.vc\.bilibili\.com\/dynamic_svr\/v1\/dynamic_svr\/dynamic_(history|new)\? url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 开屏去广告
# ^https?:\/\/app\.bilibili\.com\/x\/v2\/splash\/list url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 标签页处理
# ^https?:\/\/app\.bilibili\.com\/x\/resource\/show\/tab url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 我的页面处理
# ^https?:\/\/app\.bilibili\.com\/x\/v2\/account\/mine url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/bilibili/bilibili_plus.js
# # 漫画去广告
# ^https?:\/\/manga\.bilibili\.com\/twirp\/comic\.v\d\.Comic\/Flash url reject-dict
# ^https?:\/\/manga\.bilibili\.com\/twirp\/comic\.v\d\.Comic\/ListFlash url reject-dict
# @app2smile https://github.com/app2smile/rules
^https:\/\/app\.bilibili\.com\/x\/(v2\/(splash\/(list|show)|feed\/index\?)|resource\/show\/tab\/v2) url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-json.js
^https:\/\/app\.bilibili\.com\/bilibili\.app\.(view\.v1\.View\/View|dynamic\.v2\.Dynamic\/DynAll|playurl\.v1\.PlayURL\/PlayView)$ url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/bilibili-proto.js


# documnet vip @89996462
^https:\/\/license\.pdfexpert\.com\/api\/2\.0\/documents\/subscription\/refresh url script-request-body https://raw.githubusercontent.com/89996462/Quantumult-X/main/ycdz/documents.js


# jd比价 @dcpengx https://github.com/dcpengx/QuantumultX/blob/main/rewrite/jd_price.conf
^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) url script-response-body https://raw.githubusercontent.com/dcpengx/QuantumultX/main/JavaScript/JD_Price.js 
^https?:\/\/api\.m\.jd.com\/client\.action\?functionId=start url reject-200


# 酷我音乐SVIP @89996462 https://github.com/89996462/Quantumult-X
# ^https?:\/\/vip1\.kuwo\.cn\/(vip\/v2\/user\/vip|vip\/spi/mservice) url script-response-body https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Kuwo.js
^https?:\/\/.*\.(kuwo|lrts)\.(cn|me)\/(a\.p|music\.pay|(vip\/(v2|enc)\/(theme|user\/vip))|(EcomResource|(Mobile)?Ad)Serv(er|ice)).* url script-response-body https://raw.githubusercontent.com/89996462/Quantumult-X/main/ycdz/kwyy.js
 

# Spotify VIP @app2smile https://github.com/app2smile/rules
^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$ url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js


# 迅游手游加速器 @89996462
^https:\/\/api\.xunyou\.mobi\/api\/v1\/android\/sessions url script-response-body https://raw.githubusercontent.com/89996462/Quantumult-X/main/ycdz/xyjsq.js


# youtube
# 无中文字幕机翻方案 @id77_GitHub https://github.com/id77/QuantumultX/blob/master/rewrite/Youtube_CC.conf
https:\/\/www.youtube.com\/api\/timedtext\?.+&lang=[en|jp|kor].+?((?!&tlang=zh\-Hans).)*$ url request-header \sHTTP/1\.1(\r\n) request-header &tlang=zh-Hans HTTP/1.1$1
# ad
# YouTube 列表 https://github.com/app2smile/rules
^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next)\? url script-response-body https://raw.githubusercontent.com/app2smile/rules/master/js/youtube.js
# YouTube 贴片 https://github.com/DivineEngine/Profiles/blob/master/Quantumult/Rewrite/Block/YouTubeAds.conf
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) url 302 $1$2$3
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad url reject
^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v\d\/player\/ad_break url reject
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads url reject
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) url reject
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext url reject
# # 贴片 https://github.com/Maasea/sgmodule/blob/master/Script/Youtube/
# ^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/player url script-response-body https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube-player.js
# ^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad url script-response-body https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube-fake.js


# 知乎
# 桌面网页形式 @elecV2 https://github.com/elecV2/QuantumultX-Tools/tree/master/betterweb
^https?:\/\/www\.zhihu\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Safari/605.1.15$2
^https?:\/\/static\.zhihu\.com\/heifetz\/main\.signflow\.[a-z0-9]+\.js url reject
^https?:\/\/[a-z0-9]+\.zhimg\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Safari/605.1.15$2
# 注入CSS优化
^https:\/\/www\.zhihu\.com\/question url script-response-body https://raw.githubusercontent.com/elecV2/QuantumultX-Tools/master/betterweb/zhihux.user.js
^https:\/\/www\.zhihu\.com\/topic url script-response-body https://raw.githubusercontent.com/elecV2/QuantumultX-Tools/master/betterweb/zhihux.user.js
# 跳转重定向
^https:\/\/link\.zhihu\.com\/\?target=(https?)?(%3A|:)?(\/\/|%2F%2F)?(.*?)(&source.*)?$ url 302 http://$4
# 不跳转应用商店
^https:\/\/oia\.zhihu\.com\/answers\/([0-9]+)\?.* url 307 https://www.zhihu.com/answer/$1
^https:\/\/oia\.zhihu\.com\/articles\/([0-9]+)\?.* url 307 https://zhuanlan.zhihu.com/p/$1
# ad
# 知乎网页去广告&推荐列表
https://www\.zhihu\.com/api/v4/questions/\d+/related-readings url reject-200
https://www\.zhihu\.com/api/v4/answers/\d+/related-readings url reject-200
https://www\.zhihu\.com/api/v4/hot_recommendation url reject-200
https://www\.zhihu\.com/commercial_api/banners_v3/mobile_banner url reject-200
https://zhuanlan\.zhihu\.com/api/articles/\d+/recommendation url reject-200


# 知音漫客VIP @89996462 https://github.com/89996462/Quantumult-X
^https:\/\/apigate\.zymk\.cn url script-response-body https://raw.githubusercontent.com/89996462/Quantumult-X/main/ycdz/zymk.js


# ====================分割线====================




# ====================分割线====================

# hostname = *.tiktokv.com, *.byteoversea.com, *.musical.ly, *.snssdk.com
# # TikTok By wzw1997007 & Choler (神机库)
# (?<=_region=)CN(?=&) url 307 JP
# (?<=&app_version=)16..(?=.?.?&) url 307 1
# (?<=\?version_code=)16..(?=.?.?&) url 307 1

# # Pocket list (by @superuv)
# ^https:\/\/pocketlists\.com\/api\/v1\/pocketlists.me.get url script-response-body nzw9314/Script/pock.js

# #planner5d 家居设计软件
# ^https:\/\/planner5d\.com\/api\/sets url script-response-body nzw9314/langkhach/planner5d.js

#  小小影视Vip+Ad 21.7.6 @shaungfan
# ^https:\/\/[a-zA-Z0-9]+\.hnhx360\.com\/(init|getGlobalData) url script-response-body https://raw.githubusercontent.com/bv5204978/QXRelay/master/JS/Rewrite/xxys.vip.js
# ^https:\/\/[a-z0-9]+\.(xxjjappss|xiaoxiaoapps|huaerdadi|xiaoxiaoimg)\.com\/(ssp-svr\/ssp\/list3|vod\/reqplay|ucp\/index|getGlobalData) url script-response-body https://raw.githubusercontent.com/bv5204978/QXRelay/master/JS/Rewrite/xxys.vip.js
# *.hzsmhw.com,*.gxjysmc.com,*.hnhx360.com,*.91nhnh.com,*.judeleshiye.com,*.daqindou.com,*.syzcny.com,*.5iqzj.com,

# # 小小影视 20.8.14 @shuangfan *.xxjjappss.com,
# ^https:\/\/[a-zA-z0-9]+\.xxjjappss\.com\/getGlobalData url script-response-body https://raw.githubusercontent.com/bv5204978/QXRelay/master/JS/Rewrite/xxys.ad.js

# *.91api*,
# # > 91短视频解锁会员 https://github.com/yqc007/QuantumultX/
# ^https?:\/\/.+\.(my10api|(.*91.*))\.\w{3,4}(:\d{2,5})?\/api.php$ url script-response-body https://raw.githubusercontent.com/yqc007/QuantumultX/master/91SVCrack.js


# education.github.com, 
# # # workingcopy.edu 19.11.21 @zhiyicai https://github.com/zhiyicai/langkhach270389-Scripting-20191122/blob/master/workingcopy.js
# # ^https:\/\/education\.github\.com\/api\/user$ url script-response-body https://raw.githubusercontent.com/zhiyicai/langkhach270389-Scripting-20191122/master/workingcopy.js



# # 重定向
# https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js