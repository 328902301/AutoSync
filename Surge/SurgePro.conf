[General]
proxy-test-udp = google.com@1.1.1.1
proxy-test-url = http://www.msftconnecttest.com/connecttest.txt
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
test-timeout = 3
wifi-assist = false
geoip-maxmind-url = https://raw.githubusercontent.com/NobyDa/geoip/release/Private-GeoIP-CN.mmdb
ipv6 = true
# tun-excluded-routes = 239.255.255.250/32
allow-wifi-access = false
http-api-tls = true
http-api-web-dashboard = true
dns-server = 223.5.5.5, 223.6.6.6, 114.114.114.114, 119.29.29.29, 2400:3200::1, 2400:3200:baba::1, 2402:4e00::, system
loglevel = warning
show-error-page-for-reject = true
exclude-simple-hostnames = true
http-api = 112211@0.0.0.0:6171
udp-policy-not-supported-behaviour = REJECT
use-local-host-item-for-proxy = true
read-etc-hosts = true
all-hybrid = true
skip-proxy = = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
use-default-policy-if-wifi-not-primary = false
doh-follow-outbound-mode = true
force-http-engine-hosts = %APPEND% *.ott.cibntv.net, 119.18.193.135, 122.14.246.33, 123.59.31.1, 175.102.178.52, 116.253.24.*, 124.193.*, 124.14*, 119.79*, 175.6.26.*, 211.162.*, 220.112.* 220.169.153.*
include-all-networks = false
include-local-networks = false
hijack-dns = 8.8.8.8:53, 8.8.4.4:53, 1.1.1.1:53
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com,*.lan, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.*, localhost.*.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn
allow-hotspot-access = false
ipv6-vif = auto
doh-skip-cert-verification = true
# encrypted-dns-server = quic://i.passcloud.xyz:784
# Surge VIF
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
# tun-included-routes = 192.168.1.12/32
# encrypted-dns-server = quic://i.passcloud.xyz:784
encrypted-dns-server = https://223.5.5.5/dns-query

[Replica]
hide-apple-request = 1
hide-crash-reporter-request = 1
hide-udp = 0
keyword-filter-type = none


[Rule]

RULE-SET,https://raw.githubusercontent.com/ExaAlice/Alice/main/Rule/DIRECT.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list,DIRECT
RULE-SET,LAN,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaASN/ChinaASN.list,DIRECT
GEOIP,CN,DIRECT
FINAL,Proxy,dns-failed

[Host]
# > 该段定义本地 DNS 记录
# > 该功能等同于 /etc/hosts，加上了泛解析和别名支持。
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

[URL Rewrite]
^https?:\/\/(www\.)?g\.cn https://www.google.com/ncr 302
^https?:\/\/(www\.)?google\.cn https://www.google.com/ncr 302