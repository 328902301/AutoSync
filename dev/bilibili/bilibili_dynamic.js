import { $done } from "../../runtime/surge/public.js"
import {readFileSync as fsReadFileSync} from "fs";


const main = async() => {
    let $response = {body: fsReadFileSync("../../requests_and_responses/responses/private/dynamic.x")};

    // START
    // https://gist.github.com/yjqiang/a42fb4cb4ef10007469ec00405d57119
    var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(r,e){for(var t=new u16(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];var f=new u32(t[30]);for(n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)f[a]=a-t[n]<<5|n;return[t,f]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768),i=0;i<32768;++i){var x=(43690&i)>>>1|(21845&i)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,rev[i]=((65280&x)>>>8|(255&x)<<8)>>>1}var hMap=function(r,e,t){for(var n=r.length,f=0,a=new u16(e);f<n;++f)r[f]&&++a[r[f]-1];var i,l=new u16(e);for(f=0;f<e;++f)l[f]=l[f-1]+a[f-1]<<1;if(t){i=new u16(1<<e);var o=15-e;for(f=0;f<n;++f)if(r[f])for(var u=f<<4|r[f],s=e-r[f],c=l[r[f]-1]++<<s,v=c|(1<<s)-1;c<=v;++c)i[rev[c]>>>o]=u}else for(i=new u16(n),f=0;f<n;++f)r[f]&&(i[f]=rev[l[r[f]-1]++]>>>15-r[f]);return i},flt=new u8(288);for(i=0;i<144;++i)flt[i]=8;for(i=144;i<256;++i)flt[i]=9;for(i=256;i<280;++i)flt[i]=7;for(i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},bits=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(7&e)&t},bits16=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(7&e)},shft=function(r){return(r+7)/8|0},slc=function(r,e,t){(null==e||e<0)&&(e=0),(null==t||t>r.length)&&(t=r.length);var n=new(r instanceof u16?u16:r instanceof u32?u32:u8)(t-e);return n.set(r.subarray(e,t)),n},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(r,e,t){var n=new Error(e||ec[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,err),!t)throw n;return n},inflt=function(r,e,t){var n=r.length;if(!n||t&&t.f&&!t.l)return e||new u8(0);var f=!e||t,a=!t||t.i;t||(t={}),e||(e=new u8(3*n));var i=function(r){var t=e.length;if(r>t){var n=new u8(Math.max(2*t,r));n.set(e),e=n}},l=t.f||0,o=t.p||0,u=t.b||0,s=t.l,c=t.d,v=t.m,b=t.n,h=8*n;do{if(!s){l=bits(r,o,1);var w=bits(r,o+1,3);if(o+=3,!w){var d=r[(_=shft(o)+4)-4]|r[_-3]<<8,g=_+d;if(g>n){a&&err(0);break}f&&i(u+d),e.set(r.subarray(_,g),u),t.b=u+=d,t.p=o=8*g,t.f=l;continue}if(1==w)s=flrm,c=fdrm,v=9,b=5;else if(2==w){var m=bits(r,o,31)+257,p=bits(r,o+10,15)+4,M=m+bits(r,o+5,31)+1;o+=14;for(var y=new u8(M),x=new u8(19),k=0;k<p;++k)x[clim[k]]=bits(r,o+3*k,7);o+=3*p;var z=max(x),T=(1<<z)-1,S=hMap(x,z,1);for(k=0;k<M;){var _,A=S[bits(r,o,T)];if(o+=15&A,(_=A>>>4)<16)y[k++]=_;else{var C=0,E=0;for(16==_?(E=3+bits(r,o,3),o+=2,C=y[k-1]):17==_?(E=3+bits(r,o,7),o+=3):18==_&&(E=11+bits(r,o,127),o+=7);E--;)y[k++]=C}}var U=y.subarray(0,m),D=y.subarray(m);v=max(U),b=max(D),s=hMap(U,v,1),c=hMap(D,b,1)}else err(1);if(o>h){a&&err(0);break}}f&&i(u+131072);for(var F=(1<<v)-1,R=(1<<b)-1,H=o;;H=o){var I=(C=s[bits16(r,o)&F])>>>4;if((o+=15&C)>h){a&&err(0);break}if(C||err(2),I<256)e[u++]=I;else{if(256==I){H=o,s=null;break}var O=I-254;if(I>264){var j=fleb[k=I-257];O=bits(r,o,(1<<j)-1)+fl[k],o+=j}var q=c[bits16(r,o)&R],B=q>>>4;q||err(3),o+=15&q;D=fd[B];if(B>3){j=fdeb[B];D+=bits16(r,o)&(1<<j)-1,o+=j}if(o>h){a&&err(0);break}f&&i(u+131072);for(var G=u+O;u<G;u+=4)e[u]=e[u-D],e[u+1]=e[u+1-D],e[u+2]=e[u+2-D],e[u+3]=e[u+3-D];u=G}}t.l=s,t.p=H,t.b=u,t.f=l,s&&(l=1,t.m=v,t.d=c,t.n=b)}while(!l);return u==e.length?e:slc(e,0,u)},wbits=function(r,e,t){t<<=7&e;var n=e/8|0;r[n]|=t,r[n+1]|=t>>>8},wbits16=function(r,e,t){t<<=7&e;var n=e/8|0;r[n]|=t,r[n+1]|=t>>>8,r[n+2]|=t>>>16},hTree=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var f=t.length,a=t.slice();if(!f)return[et,0];if(1==f){var i=new u8(t[0].s+1);return i[t[0].s]=1,[i,1]}t.sort((function(r,e){return r.f-e.f})),t.push({s:-1,f:25001});var l=t[0],o=t[1],u=0,s=1,c=2;for(t[0]={s:-1,f:l.f+o.f,l:l,r:o};s!=f-1;)l=t[t[u].f<t[c].f?u++:c++],o=t[u!=s&&t[u].f<t[c].f?u++:c++],t[s++]={s:-1,f:l.f+o.f,l:l,r:o};var v=a[0].s;for(n=1;n<f;++n)a[n].s>v&&(v=a[n].s);var b=new u16(v+1),h=ln(t[s-1],b,0);if(h>e){n=0;var w=0,d=h-e,g=1<<d;for(a.sort((function(r,e){return b[e.s]-b[r.s]||r.f-e.f}));n<f;++n){var m=a[n].s;if(!(b[m]>e))break;w+=g-(1<<h-b[m]),b[m]=e}for(w>>>=d;w>0;){var p=a[n].s;b[p]<e?w-=1<<e-b[p]++-1:++n}for(;n>=0&&w;--n){var M=a[n].s;b[M]==e&&(--b[M],++w)}h=e}return[new u8(b),h]},ln=function(r,e,t){return-1==r.s?Math.max(ln(r.l,e,t+1),ln(r.r,e,t+1)):e[r.s]=t},lc=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new u16(++e),n=0,f=r[0],a=1,i=function(r){t[n++]=r},l=1;l<=e;++l)if(r[l]==f&&l!=e)++a;else{if(!f&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(f),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(f);a=1,f=r[l]}return[t.subarray(0,n),e]},clen=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},wfblk=function(r,e,t){var n=t.length,f=shft(e+2);r[f]=255&n,r[f+1]=n>>>8,r[f+2]=255^r[f],r[f+3]=255^r[f+1];for(var a=0;a<n;++a)r[f+a+4]=t[a];return 8*(f+4+n)},wblk=function(r,e,t,n,f,a,i,l,o,u,s){wbits(e,s++,t),++f[256];for(var c=hTree(f,15),v=c[0],b=c[1],h=hTree(a,15),w=h[0],d=h[1],g=lc(v),m=g[0],p=g[1],M=lc(w),y=M[0],x=M[1],k=new u16(19),z=0;z<m.length;++z)k[31&m[z]]++;for(z=0;z<y.length;++z)k[31&y[z]]++;for(var T=hTree(k,7),S=T[0],_=T[1],A=19;A>4&&!S[clim[A-1]];--A);var C,E,U,D,F=u+5<<3,R=clen(f,flt)+clen(a,fdt)+i,H=clen(f,v)+clen(a,w)+i+14+3*A+clen(k,S)+(2*k[16]+3*k[17]+7*k[18]);if(F<=R&&F<=H)return wfblk(e,s,r.subarray(o,o+u));if(wbits(e,s,1+(H<R)),s+=2,H<R){C=hMap(v,b,0),E=v,U=hMap(w,d,0),D=w;var I=hMap(S,_,0);wbits(e,s,p-257),wbits(e,s+5,x-1),wbits(e,s+10,A-4),s+=14;for(z=0;z<A;++z)wbits(e,s+3*z,S[clim[z]]);s+=3*A;for(var O=[m,y],j=0;j<2;++j){var q=O[j];for(z=0;z<q.length;++z){var B=31&q[z];wbits(e,s,I[B]),s+=S[B],B>15&&(wbits(e,s,q[z]>>>5&127),s+=q[z]>>>12)}}}else C=flm,E=flt,U=fdm,D=fdt;for(z=0;z<l;++z)if(n[z]>255){B=n[z]>>>18&31;wbits16(e,s,C[B+257]),s+=E[B+257],B>7&&(wbits(e,s,n[z]>>>23&31),s+=fleb[B]);var G=31&n[z];wbits16(e,s,U[G]),s+=D[G],G>3&&(wbits16(e,s,n[z]>>>5&8191),s+=fdeb[G])}else wbits16(e,s,C[n[z]]),s+=E[n[z]];return wbits16(e,s,C[256]),s+E[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(r,e,t,n,f,a){var i=r.length,l=new u8(n+i+5*(1+Math.ceil(i/7e3))+f),o=l.subarray(n,l.length-f),u=0;if(!e||i<8)for(var s=0;s<=i;s+=65535){var c=s+65535;c>=i&&(o[u>>3]=a),u=wfblk(o,u+1,r.subarray(s,c))}else{for(var v=deo[e-1],b=v>>>13,h=8191&v,w=(1<<t)-1,d=new u16(32768),g=new u16(w+1),m=Math.ceil(t/3),p=2*m,M=function(e){return(r[e]^r[e+1]<<m^r[e+2]<<p)&w},y=new u32(25e3),x=new u16(288),k=new u16(32),z=0,T=0,S=(s=0,0),_=0,A=0;s<i;++s){var C=M(s),E=32767&s,U=g[C];if(d[E]=U,g[C]=E,_<=s){var D=i-s;if((z>7e3||S>24576)&&D>423){u=wblk(r,o,0,y,x,k,T,S,A,s-A,u),S=z=T=0,A=s;for(var F=0;F<286;++F)x[F]=0;for(F=0;F<30;++F)k[F]=0}var R=2,H=0,I=h,O=E-U&32767;if(D>2&&C==M(s-O))for(var j=Math.min(b,D)-1,q=Math.min(32767,s),B=Math.min(258,D);O<=q&&--I&&E!=U;){if(r[s+R]==r[s+R-O]){for(var G=0;G<B&&r[s+G]==r[s+G-O];++G);if(G>R){if(R=G,H=O,G>j)break;var J=Math.min(O,G-2),K=0;for(F=0;F<J;++F){var L=s-O+F+32768&32767,N=L-d[L]+32768&32767;N>K&&(K=N,U=L)}}}O+=(E=U)-(U=d[E])+32768&32767}if(H){y[S++]=268435456|revfl[R]<<18|revfd[H];var P=31&revfl[R],Q=31&revfd[H];T+=fleb[P]+fdeb[Q],++x[257+P],++k[Q],_=s+R,++z}else y[S++]=r[s],++x[r[s]]}}u=wblk(r,o,a,y,x,k,T,S,A,s-A,u),!a&&7&u&&(u=wfblk(o,u+1,et))}return slc(l,0,n+shft(u)+f)};const crct=new Int32Array(4096);for(let r=0;r<256;++r){let e=r,t=9;for(;--t;)e=(1&e&&-306674912)^e>>>1;crct[r]=e}for(let r=0;r<256;++r){let e=crct[r];for(let t=256;t<4096;t+=256)e=crct[r|t]=e>>>8^crct[255&e]}const crcts=[];for(let r=0;r<16;)crcts[r]=crct.subarray(r<<8,++r<<8);const[t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16]=crcts,rawCRC=(r,e)=>{e=~e;let t=0;const n=r.length-16;for(;t<n;)e=t16[r[t++]^255&e]^t15[r[t++]^e>>8&255]^t14[r[t++]^e>>16&255]^t13[r[t++]^e>>>24]^t12[r[t++]]^t11[r[t++]]^t10[r[t++]]^t9[r[t++]]^t8[r[t++]]^t7[r[t++]]^t6[r[t++]]^t5[r[t++]]^t4[r[t++]]^t3[r[t++]]^t2[r[t++]]^t1[r[t++]];for(;t<r.length;++t)e=t1[255&e^r[t]]^e>>>8;return~e};var dopt=function(r,e,t,n,f){return dflt(r,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+e.mem,t,n,!f)},wbytes=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},gzh=function(r,e){var t=e.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=e.level<2?4:9==e.level?2:0,r[9]=3,0!=e.mtime&&wbytes(r,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){r[3]=8;for(var n=0;n<=t.length;++n)r[n+10]=t.charCodeAt(n)}},gzs=function(r){31==r[0]&&139==r[1]&&8==r[2]||err(6,"invalid gzip data");var e=r[3],t=10;4&e&&(t+=r[10]|2+(r[11]<<8));for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!r[t++]);return t+(2&e)},gzl=function(r){var e=r.length;return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0},gzhl=function(r){return 10+(r.filename&&r.filename.length+1||0)};function gzipSync(r,e){e||(e={});var t=rawCRC(r,0),n=r.length,f=dopt(r,e,gzhl(e),8),a=f.length;return gzh(f,e),wbytes(f,a-8,t),wbytes(f,a-4,n),f}function gunzipSync(r,e){return inflt(r.subarray(gzs(r),-8),e||new u8(gzl(r)))}

    // https://github.com/avaer/text-encoder/blob/master/index.js
    var utf8Encodings=["utf8","utf-8","unicode-1-1-utf-8"];function TextEncoder(e){if(utf8Encodings.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(e){if("string"!=typeof e)throw new TypeError("passed argument must be of tye string");var n=unescape(encodeURIComponent(e)),t=new Uint8Array(n.length);const r=n.split("");for(let e=0;e<r.length;e++)t[e]=r[e].charCodeAt(0);return t}}function TextDecoder(e){if(utf8Encodings.indexOf(e)<0&&void 0!==e&&null!=e)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.decode=function(e,n){if(void 0===e)return"";var t=void 0!==n&&t in n&&n.stream;if("boolean"!=typeof t)throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=new Array(r.length);for(let e=0;e<r.length;e++)o[e]=String.fromCharCode(r[e]);return decodeURIComponent(escape(o.join("")))}throw new TypeError("passed argument must be an array buffer view")}}

    // https://github.com/timostamm/protobuf-ts/tree/master/packages/runtime
    var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));function varint64read(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,0==(128&r))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function varint64write(e,t,r){for(let n=0;n<28;n+=7){const s=e>>>n,a=!(s>>>7==0&&0==t),i=255&(a?128|s:s);if(r.push(i),!a)return}const n=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(r.push(255&(s?128|n:n)),s){for(let e=3;e<31;e+=7){const n=t>>>e,s=!(n>>>7==0),a=255&(s?128|n:n);if(r.push(a),!s)return}r.push(t>>>31&1)}}const TWO_PWR_32_DBL$1=4294967296;function int64fromString(e){let t="-"==e[0];t&&(e=e.slice(1));const r=1e6;let n=0,s=0;function add1e6digit(t,a){const i=Number(e.slice(t,a));s*=r,n=n*r+i,n>=4294967296&&(s+=n/4294967296|0,n%=4294967296)}return add1e6digit(-24,-18),add1e6digit(-18,-12),add1e6digit(-12,-6),add1e6digit(-6),[t,n,s]}function int64toString(e,t){if(t<=2097151)return""+(4294967296*t+e);let r=(e>>>24|t<<8)>>>0&16777215,n=t>>16&65535,s=(16777215&e)+6777216*r+6710656*n,a=r+8147497*n,i=2*n,o=1e7;function decimalFrom1e7(e,t){let r=e?String(e):"";return t?"0000000".slice(r.length)+r:r}return s>=o&&(a+=Math.floor(s/o),s%=o),a>=o&&(i+=Math.floor(a/o),a%=o),decimalFrom1e7(i,0)+decimalFrom1e7(a,i)+decimalFrom1e7(s,1)}function varint32write(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let r=0;r<9;r++)t.push(127&e|128),e>>=7;t.push(1)}}function varint32read(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}function detectBi(){const e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const BI=detectBi();function assertBi(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const RE_DECIMAL_STR=/^-?[0-9]+$/,TWO_PWR_32_DBL=4294967296;class SharedPbLong{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=4294967296*this.hi+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}const _PbULong=class extends SharedPbLong{static from(e){if(BI)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=BI.C(e);case"number":if(0===e)return this.ZERO;e=BI.C(e);case"bigint":if(!e)return this.ZERO;if(e<BI.UMIN)throw new Error("signed value for ulong");if(e>BI.UMAX)throw new Error("ulong too large");return BI.V.setBigUint64(0,e,!0),new _PbULong(BI.V.getInt32(0,!0),BI.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!RE_DECIMAL_STR.test(e))throw new Error("string is no integer");let[t,r,n]=int64fromString(e);if(t)throw new Error("signed value");return new _PbULong(r,n);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new _PbULong(e,e/4294967296)}throw new Error("unknown value "+typeof e)}toString(){return BI?this.toBigInt().toString():int64toString(this.lo,this.hi)}toBigInt(){return assertBi(BI),BI.V.setInt32(0,this.lo,!0),BI.V.setInt32(4,this.hi,!0),BI.V.getBigUint64(0,!0)}};let PbULong=_PbULong;PbULong.ZERO=new _PbULong(0,0);const _PbLong=class extends SharedPbLong{static from(e){if(BI)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=BI.C(e);case"number":if(0===e)return this.ZERO;e=BI.C(e);case"bigint":if(!e)return this.ZERO;if(e<BI.MIN)throw new Error("ulong too small");if(e>BI.MAX)throw new Error("ulong too large");return BI.V.setBigInt64(0,e,!0),new _PbLong(BI.V.getInt32(0,!0),BI.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!RE_DECIMAL_STR.test(e))throw new Error("string is no integer");let[t,r,n]=int64fromString(e),s=new _PbLong(r,n);return t?s.negate():s;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new _PbLong(e,e/4294967296):new _PbLong(-e,-e/4294967296).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new _PbLong(t,e)}toString(){if(BI)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+int64toString(e.lo,e.hi)}return int64toString(this.lo,this.hi)}toBigInt(){return assertBi(BI),BI.V.setInt32(0,this.lo,!0),BI.V.setInt32(4,this.hi,!0),BI.V.getBigInt64(0,!0)}};let PbLong=_PbLong;PbLong.ZERO=new _PbLong(0,0);class BinaryReader{constructor(e,t){this.varint64=varint64read,this.uint32=varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0})}tag(){let e=this.uint32(),t=e>>>3,r=7&e;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case WireType.Varint:for(;128&this.buf[this.pos++];);break;case WireType.Bit64:this.pos+=4;case WireType.Bit32:this.pos+=4;break;case WireType.LengthDelimited:let t=this.uint32();this.pos+=t;break;case WireType.StartGroup:let r;for(;(r=this.tag()[1])!==WireType.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new PbLong(...this.varint64())}uint64(){return new PbULong(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(1&e);return e=(e>>>1|(1&t)<<31)^r,t=t>>>1^r,new PbLong(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new PbULong(this.sfixed32(),this.sfixed32())}sfixed64(){return new PbLong(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function assert(e,t){if(!e)throw new Error(t)}const FLOAT32_MAX=34028234663852886e22,FLOAT32_MIN=-34028234663852886e22,UINT32_MAX=4294967295,INT32_MAX=2147483647,INT32_MIN=-2147483648;function assertInt32(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>INT32_MAX||e<INT32_MIN)throw new Error("invalid int 32: "+e)}function assertUInt32(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function assertFloat32(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>FLOAT32_MAX||e<FLOAT32_MIN))throw new Error("invalid float 32: "+e)}class BinaryWriter{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),r=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],r),r+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(assertUInt32(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return assertInt32(e),varint32write(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){assertFloat32(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){assertUInt32(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){assertInt32(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return assertInt32(e),varint32write(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=PbLong.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=PbULong.from(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}int64(e){let t=PbLong.from(e);return varint64write(t.lo,t.hi,this.buf),this}sint64(e){let t=PbLong.from(e),r=t.hi>>31;return varint64write(t.lo<<1^r,(t.hi<<1|t.lo>>>31)^r,this.buf),this}uint64(e){let t=PbULong.from(e);return varint64write(t.lo,t.hi,this.buf),this}}var UnknownFieldHandler;function binaryWriteOptions(e){return e?__spreadValues(__spreadValues({},defaultsWrite$1),e):defaultsWrite$1}function binaryReadOptions(e){return e?__spreadValues(__spreadValues({},defaultsRead$1),e):defaultsRead$1}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(t,r,n,s,a)=>{(is(r)?r[e.symbol]:r[e.symbol]=[]).push({no:n,wireType:s,data:a})},e.onWrite=(t,r,n)=>{for(let{no:t,wireType:s,data:a}of e.list(r))n.tag(t,s).raw(a)},e.list=(t,r)=>{if(is(t)){let n=t[e.symbol];return r?n.filter((e=>e.no==r)):n}return[]},e.last=(t,r)=>e.list(t,r).slice(-1)[0];const is=t=>t&&Array.isArray(t[e.symbol])}(UnknownFieldHandler||(UnknownFieldHandler={}));const defaultsRead$1={readUnknownField:!0,readerFactory:e=>new BinaryReader(e)},defaultsWrite$1={writeUnknownFields:!0,writerFactory:()=>new BinaryWriter};var WireType;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(WireType||(WireType={}));const MESSAGE_TYPE=Symbol.for("protobuf-ts/message-type");function lowerCamelCase(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){let s=e.charAt(n);"_"==s?t=!0:/\d/.test(s)?(r.push(s),t=!0):t?(r.push(s.toUpperCase()),t=!1):0==n?r.push(s.toLowerCase()):r.push(s)}return r.join("")}var ScalarType,LongType,RepeatType;function normalizeFieldInfo(e){var t,r,n,s;return e.localName=null!=(t=e.localName)?t:lowerCamelCase(e.name),e.jsonName=null!=(r=e.jsonName)?r:lowerCamelCase(e.name),e.repeat=null!=(n=e.repeat)?n:0,e.opt=null!=(s=e.opt)?s:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function isOneofGroup(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(ScalarType||(ScalarType={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(LongType||(LongType={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(RepeatType||(RepeatType={}));class ReflectionTypeCheck{constructor(e){var t;this.fields=null!=(t=e.fields)?t:[]}prepare(){if(this.data)return;const e=[],t=[],r=[];for(let n of this.fields)if(n.oneof)r.includes(n.oneof)||(r.push(n.oneof),e.push(n.oneof),t.push(n.oneof));else switch(t.push(n.localName),n.kind){case"scalar":case"enum":n.opt&&!n.repeat||e.push(n.localName);break;case"message":n.repeat&&e.push(n.localName);break;case"map":e.push(n.localName)}this.data={req:e,known:t,oneofs:Object.values(r)}}is(e,t,r=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let n=Object.keys(e),s=this.data;if(n.length<s.req.length||s.req.some((e=>!n.includes(e))))return!1;if(!r&&n.some((e=>!s.known.includes(e))))return!1;if(t<1)return!0;for(const n of s.oneofs){const s=e[n];if(!isOneofGroup(s))return!1;if(void 0===s.oneofKind)continue;const a=this.fields.find((e=>e.localName===s.oneofKind));if(!a)return!1;if(!this.field(s[s.oneofKind],a,r,t))return!1}for(const n of this.fields)if(void 0===n.oneof&&!this.field(e[n.localName],n,r,t))return!1;return!0}field(e,t,r,n){let s=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:s?this.scalars(e,t.T,n,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:s?this.scalars(e,ScalarType.INT32,n):this.scalar(e,ScalarType.INT32);case"message":return void 0===e||(s?this.messages(e,t.T(),r,n):this.message(e,t.T(),r,n));case"map":if("object"!=typeof e||null===e)return!1;if(n<2)return!0;if(!this.mapKeys(e,t.K,n))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,n,t.V.L);case"enum":return this.scalars(Object.values(e),ScalarType.INT32,n);case"message":return this.messages(Object.values(e),t.V.T(),r,n)}}return!0}message(e,t,r,n){return r?t.isAssignable(e,n):t.is(e,n)}messages(e,t,r,n){if(!Array.isArray(e))return!1;if(n<2)return!0;if(r){for(let r=0;r<e.length&&r<n;r++)if(!t.isAssignable(e[r],n-1))return!1}else for(let r=0;r<e.length&&r<n;r++)if(!t.is(e[r],n-1))return!1;return!0}scalar(e,t,r){let n=typeof e;switch(t){case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:switch(r){case LongType.BIGINT:return"bigint"==n;case LongType.NUMBER:return"number"==n&&!isNaN(e);default:return"string"==n}case ScalarType.BOOL:return"boolean"==n;case ScalarType.STRING:return"string"==n;case ScalarType.BYTES:return e instanceof Uint8Array;case ScalarType.DOUBLE:case ScalarType.FLOAT:return"number"==n&&!isNaN(e);default:return"number"==n&&Number.isInteger(e)}}scalars(e,t,r,n){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e))for(let s=0;s<e.length&&s<r;s++)if(!this.scalar(e[s],t,n))return!1;return!0}mapKeys(e,t,r){let n=Object.keys(e);switch(t){case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.UINT32:return this.scalars(n.slice(0,r).map((e=>parseInt(e))),t,r);case ScalarType.BOOL:return this.scalars(n.slice(0,r).map((e=>"true"==e||"false"!=e&&e)),t,r);default:return this.scalars(n,t,r,LongType.STRING)}}}function typeofJsonValue(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function isJsonObject(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let encTable="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),decTable=[];for(let e=0;e<encTable.length;e++)decTable[encTable[e].charCodeAt(0)]=e;function base64decode(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let r,n=new Uint8Array(t),s=0,a=0,i=0;for(let t=0;t<e.length;t++){if(r=decTable[e.charCodeAt(t)],void 0===r)switch(e[t]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:i=r,a=1;break;case 1:n[s++]=i<<2|(48&r)>>4,i=r,a=2;break;case 2:n[s++]=(15&i)<<4|(60&r)>>2,i=r,a=3;break;case 3:n[s++]=(3&i)<<6|r,a=0}}if(1==a)throw Error("invalid base64 string.");return n.subarray(0,s)}function base64encode(e){let t,r="",n=0,s=0;for(let a=0;a<e.length;a++)switch(t=e[a],n){case 0:r+=encTable[t>>2],s=(3&t)<<4,n=1;break;case 1:r+=encTable[s|t>>4],s=(15&t)<<2,n=2;break;case 2:r+=encTable[s|t>>6],r+=encTable[63&t],n=0}return n&&(r+=encTable[s],r+="=",1==n&&(r+="=")),r}function reflectionLongConvert(e,t){switch(t){case LongType.BIGINT:return e.toBigInt();case LongType.NUMBER:return e.toNumber();default:return e.toString()}}decTable["-".charCodeAt(0)]=encTable.indexOf("+"),decTable["_".charCodeAt(0)]=encTable.indexOf("/");class ReflectionJsonReader{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!=(e=this.info.fields)?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,r){if(!e){let e=typeofJsonValue(r);throw"number"!=e&&"boolean"!=e||(e=r.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,r){this.prepare();const n=[];for(const[s,a]of Object.entries(e)){const e=this.fMap[s];if(!e){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const i=e.localName;let o;if(e.oneof){if(n.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);n.push(e.oneof),o=t[e.oneof]={oneofKind:i}}else o=t;if("map"==e.kind){if(null===a)continue;this.assert(isJsonObject(a),e.name,a);const t=o[i];for(const[n,s]of Object.entries(a)){let a;switch(this.assert(null!==s,e.name+" map value",null),e.V.kind){case"message":a=e.V.T().internalJsonRead(s,r);break;case"enum":if(a=this.enum(e.V.T(),s,e.name,r.ignoreUnknownFields),!1===a)continue;break;case"scalar":a=this.scalar(s,e.V.T,e.V.L,e.name)}this.assert(void 0!==a,e.name+" map value",s);let i=n;e.K==ScalarType.BOOL&&(i="true"==i||"false"!=i&&i),i=this.scalar(i,e.K,LongType.STRING,e.name).toString(),t[i]=a}}else if(e.repeat){if(null===a)continue;this.assert(Array.isArray(a),e.name,a);const t=o[i];for(const n of a){let s;switch(this.assert(null!==n,e.name,null),e.kind){case"message":s=e.T().internalJsonRead(n,r);break;case"enum":if(s=this.enum(e.T(),n,e.name,r.ignoreUnknownFields),!1===s)continue;break;case"scalar":s=this.scalar(n,e.T,e.L,e.name)}this.assert(void 0!==s,e.name,a),t.push(s)}}else switch(e.kind){case"message":if(null===a&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}o[i]=e.T().internalJsonRead(a,r,o[i]);break;case"enum":let t=this.enum(e.T(),a,e.name,r.ignoreUnknownFields);if(!1===t)continue;o[i]=t;break;case"scalar":o[i]=this.scalar(a,e.T,e.L,e.name)}}}enum(e,t,r,n){if("google.protobuf.NullValue"==e[0]&&assert(null===t,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return assert(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${t}.`),t;case"string":let s=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(s=t.substring(e[2].length));let a=e[1][s];return(void 0!==a||!n)&&(assert("number"==typeof a,`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${t}".`),a)}assert(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,r,n){let s;try{switch(t){case ScalarType.DOUBLE:case ScalarType.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){s="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){s="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let n=Number(e);if(Number.isNaN(n)){s="not a number";break}if(!Number.isFinite(n)){s="too large or small";break}return t==ScalarType.FLOAT&&assertFloat32(n),n;case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.UINT32:if(null===e)return 0;let a;if("number"==typeof e?a=e:""===e?s="empty string":"string"==typeof e&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),void 0===a)break;return t==ScalarType.UINT32?assertUInt32(a):assertInt32(a),a;case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:if(null===e)return reflectionLongConvert(PbLong.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return reflectionLongConvert(PbLong.from(e),r);case ScalarType.FIXED64:case ScalarType.UINT64:if(null===e)return reflectionLongConvert(PbULong.ZERO,r);if("number"!=typeof e&&"string"!=typeof e)break;return reflectionLongConvert(PbULong.from(e),r);case ScalarType.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case ScalarType.STRING:if(null===e)return"";if("string"!=typeof e){s="extra whitespace";break}try{encodeURIComponent(e)}catch(e){e="invalid UTF8";break}return e;case ScalarType.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return base64decode(e)}}catch(e){s=e.message}this.assert(!1,n+(s?" - "+s:""),e)}}class ReflectionJsonWriter{constructor(e){var t;this.fields=null!=(t=e.fields)?t:[]}write(e,t){const r={},n=e;for(const e of this.fields){if(!e.oneof){let s=this.field(e,n[e.localName],t);void 0!==s&&(r[t.useProtoFieldName?e.name:e.jsonName]=s);continue}const s=n[e.oneof];if(s.oneofKind!==e.localName)continue;const a="scalar"==e.kind||"enum"==e.kind?__spreadProps(__spreadValues({},t),{emitDefaultValues:!0}):t;let i=this.field(e,s[e.localName],a);assert(void 0!==i),r[t.useProtoFieldName?e.name:e.jsonName]=i}return r}field(e,t,r){let n;if("map"==e.kind){assert("object"==typeof t&&null!==t);const s={};switch(e.V.kind){case"scalar":for(const[r,n]of Object.entries(t)){const t=this.scalar(e.V.T,n,e.name,!1,!0);assert(void 0!==t),s[r.toString()]=t}break;case"message":const n=e.V.T();for(const[a,i]of Object.entries(t)){const t=this.message(n,i,e.name,r);assert(void 0!==t),s[a.toString()]=t}break;case"enum":const a=e.V.T();for(const[n,i]of Object.entries(t)){assert(void 0===i||"number"==typeof i);const t=this.enum(a,i,e.name,!1,!0,r.enumAsInteger);assert(void 0!==t),s[n.toString()]=t}}(r.emitDefaultValues||Object.keys(s).length>0)&&(n=s)}else if(e.repeat){assert(Array.isArray(t));const s=[];switch(e.kind){case"scalar":for(let r=0;r<t.length;r++){const n=this.scalar(e.T,t[r],e.name,e.opt,!0);assert(void 0!==n),s.push(n)}break;case"enum":const n=e.T();for(let a=0;a<t.length;a++){assert(void 0===t[a]||"number"==typeof t[a]);const i=this.enum(n,t[a],e.name,e.opt,!0,r.enumAsInteger);assert(void 0!==i),s.push(i)}break;case"message":const a=e.T();for(let n=0;n<t.length;n++){const i=this.message(a,t[n],e.name,r);assert(void 0!==i),s.push(i)}}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(n=s)}else switch(e.kind){case"scalar":n=this.scalar(e.T,t,e.name,e.opt,r.emitDefaultValues);break;case"enum":n=this.enum(e.T(),t,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":n=this.message(e.T(),t,e.name,r)}return n}enum(e,t,r,n,s,a){if("google.protobuf.NullValue"==e[0])return null;if(void 0!==t){if(0!==t||s||n)return assert("number"==typeof t),assert(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else assert(n)}message(e,t,r,n){return void 0===t?n.emitDefaultValues?null:void 0:e.internalJsonWrite(t,n)}scalar(e,t,r,n,s){if(void 0===t)return void assert(n);const a=s||n;switch(e){case ScalarType.INT32:case ScalarType.SFIXED32:case ScalarType.SINT32:return 0===t?a?0:void 0:(assertInt32(t),t);case ScalarType.FIXED32:case ScalarType.UINT32:return 0===t?a?0:void 0:(assertUInt32(t),t);case ScalarType.FLOAT:assertFloat32(t);case ScalarType.DOUBLE:return 0===t?a?0:void 0:(assert("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case ScalarType.STRING:return""===t?a?"":void 0:(assert("string"==typeof t),t);case ScalarType.BOOL:return!1===t?!a&&void 0:(assert("boolean"==typeof t),t);case ScalarType.UINT64:case ScalarType.FIXED64:assert("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=PbULong.from(t);if(e.isZero()&&!a)return;return e.toString();case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:assert("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let r=PbLong.from(t);if(r.isZero()&&!a)return;return r.toString();case ScalarType.BYTES:return assert(t instanceof Uint8Array),t.byteLength?base64encode(t):a?"":void 0}}}function reflectionScalarDefault(e,t=LongType.STRING){switch(e){case ScalarType.BOOL:return!1;case ScalarType.UINT64:case ScalarType.FIXED64:return reflectionLongConvert(PbULong.ZERO,t);case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return reflectionLongConvert(PbLong.ZERO,t);case ScalarType.DOUBLE:case ScalarType.FLOAT:return 0;case ScalarType.BYTES:return new Uint8Array(0);case ScalarType.STRING:return"";default:return 0}}class ReflectionBinaryReader{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!=(e=this.info.fields)?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,r,n){this.prepare();const s=void 0===n?e.len:e.pos+n;for(;e.pos<s;){const[n,s]=e.tag(),a=this.fieldNoToField.get(n);if(!a){let a=r.readUnknownField;if("throw"==a)throw new Error(`Unknown field ${n} (wire type ${s}) for ${this.info.typeName}`);let i=e.skip(s);!1!==a&&(!0===a?UnknownFieldHandler.onRead:a)(this.info.typeName,t,n,s,i);continue}let i=t,o=a.repeat,l=a.localName;switch(a.oneof&&(i=i[a.oneof],i.oneofKind!==l&&(i=t[a.oneof]={oneofKind:l})),a.kind){case"scalar":case"enum":let t="enum"==a.kind?ScalarType.INT32:a.T,n="scalar"==a.kind?a.L:void 0;if(o){let r=i[l];if(s==WireType.LengthDelimited&&t!=ScalarType.STRING&&t!=ScalarType.BYTES){let s=e.uint32()+e.pos;for(;e.pos<s;)r.push(this.scalar(e,t,n))}else r.push(this.scalar(e,t,n))}else i[l]=this.scalar(e,t,n);break;case"message":if(o){let t=i[l],n=a.T().internalBinaryRead(e,e.uint32(),r);t.push(n)}else i[l]=a.T().internalBinaryRead(e,e.uint32(),r,i[l]);break;case"map":let[c,u]=this.mapEntry(a,e,r);i[l][c]=u}}}mapEntry(e,t,r){let n,s,a=t.uint32(),i=t.pos+a;for(;t.pos<i;){let[a,i]=t.tag();switch(a){case 1:n=e.K==ScalarType.BOOL?t.bool().toString():this.scalar(t,e.K,LongType.STRING);break;case 2:switch(e.V.kind){case"scalar":s=this.scalar(t,e.V.T,e.V.L);break;case"enum":s=t.int32();break;case"message":s=e.V.T().internalBinaryRead(t,t.uint32(),r)}break;default:throw new Error(`Unknown field ${a} (wire type ${i}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===n){let t=reflectionScalarDefault(e.K);n=e.K==ScalarType.BOOL?t.toString():t}if(void 0===s)switch(e.V.kind){case"scalar":s=reflectionScalarDefault(e.V.T,e.V.L);break;case"enum":s=0;break;case"message":s=e.V.T().create()}return[n,s]}scalar(e,t,r){switch(t){case ScalarType.INT32:return e.int32();case ScalarType.STRING:return e.string();case ScalarType.BOOL:return e.bool();case ScalarType.DOUBLE:return e.double();case ScalarType.FLOAT:return e.float();case ScalarType.INT64:return reflectionLongConvert(e.int64(),r);case ScalarType.UINT64:return reflectionLongConvert(e.uint64(),r);case ScalarType.FIXED64:return reflectionLongConvert(e.fixed64(),r);case ScalarType.FIXED32:return e.fixed32();case ScalarType.BYTES:return e.bytes();case ScalarType.UINT32:return e.uint32();case ScalarType.SFIXED32:return e.sfixed32();case ScalarType.SFIXED64:return reflectionLongConvert(e.sfixed64(),r);case ScalarType.SINT32:return e.sint32();case ScalarType.SINT64:return reflectionLongConvert(e.sint64(),r)}}}class ReflectionBinaryWriter{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,r){this.prepare();for(const n of this.fields){let s,a,i=n.repeat,o=n.localName;if(n.oneof){const t=e[n.oneof];if(t.oneofKind!==o)continue;s=t[o],a=!0}else s=e[o],a=!1;switch(n.kind){case"scalar":case"enum":let e="enum"==n.kind?ScalarType.INT32:n.T;if(i)if(assert(Array.isArray(s)),i==RepeatType.PACKED)this.packed(t,e,n.no,s);else for(const r of s)this.scalar(t,e,n.no,r,!0);else void 0===s?assert(n.opt):this.scalar(t,e,n.no,s,a||n.opt);break;case"message":if(i){assert(Array.isArray(s));for(const e of s)this.message(t,r,n.T(),n.no,e)}else this.message(t,r,n.T(),n.no,s);break;case"map":assert("object"==typeof s&&null!==s);for(const[e,a]of Object.entries(s))this.mapEntry(t,r,n,e,a)}}let n=r.writeUnknownFields;!1!==n&&(!0===n?UnknownFieldHandler.onWrite:n)(this.info.typeName,e,t)}mapEntry(e,t,r,n,s){e.tag(r.no,WireType.LengthDelimited),e.fork();let a=n;switch(r.K){case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.UINT32:case ScalarType.SFIXED32:case ScalarType.SINT32:a=Number.parseInt(n);break;case ScalarType.BOOL:assert("true"==n||"false"==n),a="true"==n}switch(this.scalar(e,r.K,1,a,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,s,!0);break;case"enum":this.scalar(e,ScalarType.INT32,2,s,!0);break;case"message":this.message(e,t,r.V.T(),2,s)}e.join()}message(e,t,r,n,s){void 0!==s&&(r.internalBinaryWrite(s,e.tag(n,WireType.LengthDelimited).fork(),t),e.join())}scalar(e,t,r,n,s){let[a,i,o]=this.scalarInfo(t,n);o&&!s||(e.tag(r,a),e[i](n))}packed(e,t,r,n){if(!n.length)return;assert(t!==ScalarType.BYTES&&t!==ScalarType.STRING),e.tag(r,WireType.LengthDelimited),e.fork();let[,s]=this.scalarInfo(t);for(let t=0;t<n.length;t++)e[s](n[t]);e.join()}scalarInfo(e,t){let r,n=WireType.Varint,s=void 0===t,a=0===t;switch(e){case ScalarType.INT32:r="int32";break;case ScalarType.STRING:a=s||!t.length,n=WireType.LengthDelimited,r="string";break;case ScalarType.BOOL:a=!1===t,r="bool";break;case ScalarType.UINT32:r="uint32";break;case ScalarType.DOUBLE:n=WireType.Bit64,r="double";break;case ScalarType.FLOAT:n=WireType.Bit32,r="float";break;case ScalarType.INT64:a=s||PbLong.from(t).isZero(),r="int64";break;case ScalarType.UINT64:a=s||PbULong.from(t).isZero(),r="uint64";break;case ScalarType.FIXED64:a=s||PbULong.from(t).isZero(),n=WireType.Bit64,r="fixed64";break;case ScalarType.BYTES:a=s||!t.byteLength,n=WireType.LengthDelimited,r="bytes";break;case ScalarType.FIXED32:n=WireType.Bit32,r="fixed32";break;case ScalarType.SFIXED32:n=WireType.Bit32,r="sfixed32";break;case ScalarType.SFIXED64:a=s||PbLong.from(t).isZero(),n=WireType.Bit64,r="sfixed64";break;case ScalarType.SINT32:r="sint32";break;case ScalarType.SINT64:a=s||PbLong.from(t).isZero(),r="sint64"}return[n,r,s||a]}}function reflectionCreate(e){const t={};Object.defineProperty(t,MESSAGE_TYPE,{enumerable:!1,value:e});for(let r of e.fields){let e=r.localName;if(!r.opt)if(r.oneof)t[r.oneof]={oneofKind:void 0};else if(r.repeat)t[e]=[];else switch(r.kind){case"scalar":t[e]=reflectionScalarDefault(r.T,r.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}function reflectionMergePartial(e,t,r){let n,s,a=r;for(let r of e.fields){let e=r.localName;if(r.oneof){const i=a[r.oneof];if(void 0===i)continue;if(n=i[e],s=t[r.oneof],s.oneofKind=i.oneofKind,void 0===n){delete s[e];continue}}else if(n=a[e],s=t,void 0===n)continue;switch(r.kind){case"scalar":case"enum":r.repeat?s[e]=n.concat():s[e]=n;break;case"message":let t=r.T();if(r.repeat)for(let r=0;r<n.length;r++)s[e][r]=t.create(n[r]);else void 0===s[e]?s[e]=t.create(n):t.mergePartial(s[e],n);break;case"map":switch(r.V.kind){case"scalar":case"enum":Object.assign(s[e],n);break;case"message":let t=r.V.T();for(let r of Object.keys(n))s[e][r]=t.create(n[r])}}}}const defaultsWrite={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},defaultsRead={ignoreUnknownFields:!1};function jsonReadOptions(e){return e?__spreadValues(__spreadValues({},defaultsRead),e):defaultsRead}function jsonWriteOptions(e){return e?__spreadValues(__spreadValues({},defaultsWrite),e):defaultsWrite}function reflectionEquals(e,t,r){if(t===r)return!0;if(!t||!r)return!1;for(let n of e.fields){let e=n.localName,s=n.oneof?t[n.oneof][e]:t[e],a=n.oneof?r[n.oneof][e]:r[e];switch(n.kind){case"enum":case"scalar":let e="enum"==n.kind?ScalarType.INT32:n.T;if(!(n.repeat?repeatedPrimitiveEq(e,s,a):primitiveEq(e,s,a)))return!1;break;case"map":if(!("message"==n.V.kind?repeatedMsgEq(n.V.T(),objectValues(s),objectValues(a)):repeatedPrimitiveEq("enum"==n.V.kind?ScalarType.INT32:n.V.T,objectValues(s),objectValues(a))))return!1;break;case"message":let t=n.T();if(!(n.repeat?repeatedMsgEq(t,s,a):t.equals(s,a)))return!1}}return!0}const objectValues=Object.values;function primitiveEq(e,t,r){if(t===r)return!0;if(e!==ScalarType.BYTES)return!1;let n=t,s=r;if(n.length!==s.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=s[e])return!1;return!0}function repeatedPrimitiveEq(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!primitiveEq(e,t[n],r[n]))return!1;return!0}function repeatedMsgEq(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e.equals(t[n],r[n]))return!1;return!0}class MessageType{constructor(e,t,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(normalizeFieldInfo),this.options=null!=r?r:{},this.refTypeCheck=new ReflectionTypeCheck(this),this.refJsonReader=new ReflectionJsonReader(this),this.refJsonWriter=new ReflectionJsonWriter(this),this.refBinReader=new ReflectionBinaryReader(this),this.refBinWriter=new ReflectionBinaryWriter(this)}create(e){let t=reflectionCreate(this);return void 0!==e&&reflectionMergePartial(this,t,e),t}clone(e){let t=this.create();return reflectionMergePartial(this,t,e),t}equals(e,t){return reflectionEquals(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){reflectionMergePartial(this,e,t)}fromBinary(e,t){let r=binaryReadOptions(t);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,t){return this.internalJsonRead(e,jsonReadOptions(t))}fromJsonString(e,t){let r=JSON.parse(e);return this.fromJson(r,t)}toJson(e,t){return this.internalJsonWrite(e,jsonWriteOptions(t))}toJsonString(e,t){var r;let n=this.toJson(e,t);return JSON.stringify(n,null,null!=(r=null==t?void 0:t.prettySpaces)?r:0)}toBinary(e,t){let r=binaryWriteOptions(t);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,t,r){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let n=null!=r?r:this.create();return this.refJsonReader.read(e,n,t),n}throw new Error(`Unable to parse message ${this.typeName} from JSON ${typeofJsonValue(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,r){return this.refBinWriter.write(e,t,r),t}internalBinaryRead(e,t,r,n){let s=null!=n?n:this.create();return this.refBinReader.read(e,s,r,t),s}}

    // eg: npx protoc --ts_out data --ts_opt output_javascript_es2015 --proto_path data data/dynamic/dynamic.proto
    var DynamicType;!function(e){e[e.dyn_none=0]="dyn_none",e[e.forward=1]="forward",e[e.av=2]="av",e[e.pgc=3]="pgc",e[e.courses=4]="courses",e[e.fold=5]="fold",e[e.word=6]="word",e[e.draw=7]="draw",e[e.article=8]="article",e[e.music=9]="music",e[e.common_square=10]="common_square",e[e.common_vertical=11]="common_vertical",e[e.live=12]="live",e[e.medialist=13]="medialist",e[e.courses_season=14]="courses_season",e[e.ad=15]="ad",e[e.applet=16]="applet",e[e.subscription=17]="subscription",e[e.live_rcmd=18]="live_rcmd",e[e.banner=19]="banner",e[e.ugc_season=20]="ugc_season",e[e.subscription_new=21]="subscription_new"}(DynamicType||(DynamicType={}));class DynamicItem$Type extends MessageType{constructor(){super("b.DynamicItem",[{no:1,name:"card_type",kind:"enum",T:()=>["b.DynamicType",DynamicType]}])}create(e){const n={cardType:0};return globalThis.Object.defineProperty(n,MESSAGE_TYPE,{enumerable:!1,value:this}),void 0!==e&&reflectionMergePartial(this,n,e),n}internalBinaryRead(e,n,t,i){let r=null!=i?i:this.create(),a=e.pos+n;for(;e.pos<a;){let[n,i]=e.tag();switch(n){case 1:r.cardType=e.int32();break;default:let a=t.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${i}) for ${this.typeName}`);let o=e.skip(i);!1!==a&&(!0===a?UnknownFieldHandler.onRead:a)(this.typeName,r,n,i,o)}}return r}internalBinaryWrite(e,n,t){0!==e.cardType&&n.tag(1,WireType.Varint).int32(e.cardType);let i=t.writeUnknownFields;return!1!==i&&(1==i?UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}const DynamicItem=new DynamicItem$Type;class DynAllReply$Type extends MessageType{constructor(){super("b.DynAllReply",[{no:1,name:"dynamic_list",kind:"message",T:()=>DynamicList}])}create(e){const n={};return globalThis.Object.defineProperty(n,MESSAGE_TYPE,{enumerable:!1,value:this}),void 0!==e&&reflectionMergePartial(this,n,e),n}internalBinaryRead(e,n,t,i){let r=null!=i?i:this.create(),a=e.pos+n;for(;e.pos<a;){let[n,i]=e.tag();switch(n){case 1:r.dynamicList=DynamicList.internalBinaryRead(e,e.uint32(),t,r.dynamicList);break;default:let a=t.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${i}) for ${this.typeName}`);let o=e.skip(i);!1!==a&&(!0===a?UnknownFieldHandler.onRead:a)(this.typeName,r,n,i,o)}}return r}internalBinaryWrite(e,n,t){e.dynamicList&&DynamicList.internalBinaryWrite(e.dynamicList,n.tag(1,WireType.LengthDelimited).fork(),t).join();let i=t.writeUnknownFields;return!1!==i&&(1==i?UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}const DynAllReply=new DynAllReply$Type;class DynamicList$Type extends MessageType{constructor(){super("b.DynamicList",[{no:1,name:"list",kind:"message",repeat:1,T:()=>DynamicItem}])}create(e){const n={list:[]};return globalThis.Object.defineProperty(n,MESSAGE_TYPE,{enumerable:!1,value:this}),void 0!==e&&reflectionMergePartial(this,n,e),n}internalBinaryRead(e,n,t,i){let r=null!=i?i:this.create(),a=e.pos+n;for(;e.pos<a;){let[n,i]=e.tag();switch(n){case 1:r.list.push(DynamicItem.internalBinaryRead(e,e.uint32(),t));break;default:let a=t.readUnknownField;if("throw"===a)throw new globalThis.Error(`Unknown field ${n} (wire type ${i}) for ${this.typeName}`);let o=e.skip(i);!1!==a&&(!0===a?UnknownFieldHandler.onRead:a)(this.typeName,r,n,i,o)}}return r}internalBinaryWrite(e,n,t){for(let i=0;i<e.list.length;i++)DynamicItem.internalBinaryWrite(e.list[i],n.tag(1,WireType.LengthDelimited).fork(),t).join();let i=t.writeUnknownFields;return!1!==i&&(1==i?UnknownFieldHandler.onWrite:i)(this.typeName,e,n),n}}const DynamicList=new DynamicList$Type;

    let body = $response.body;

    // 解压 gzip
    let data = gunzipSync(body.slice(5));
    // 解码
    let message = DynAllReply.fromBinary(data, {readUnknownField: true});

    // 修改数据后编码
    // console.log(message.dynamicList.list.length);
    // 15 时候 i.toJSON().cardType 为 ad
    message.dynamicList.list = message.dynamicList.list.filter(element => !(element.cardType===15));
    // console.log(message.dynamicList.list.length);
    data = DynAllReply.toBinary(message);

    // 压缩
    let gzip_data = gzipSync(data, {level: 0, mtime: 0});  // 速度最快；Uint8Array

    // 校验
    let gzip_data_len = gzip_data.length;
    let new_body = new Uint8Array(5 + gzip_data_len);
    new_body.set(Uint8Array.from([...body.slice(0, 2), (gzip_data_len>>16)&0xff, (gzip_data_len >> 8)&0xff, gzip_data_len&0xff]), 0);
    new_body.set(gzip_data, 5);

    $done({body: new_body});
    // END
};

main().then();
