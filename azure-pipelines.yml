trigger:
  - docker-devops

pool:
  vmImage: "Ubuntu-16.04"

variables:
  buildConfiguration: "Release"
  imageName: "FilterLists:$(Build.BuildId)"

steps:
  - script: |
      dotnet build --configuration $(buildConfiguration)
      dotnet publish --configuration $(buildConfiguration) --output out
      docker build -f Dockerfile -t $(dockerId)/$(imageName) .
      docker login -u $(dockerId) -p $pswd
      docker push $(dockerId)/$(imageName)
    env:
      pswd: $(dockerPassword)
